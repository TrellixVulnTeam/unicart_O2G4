{"ast":null,"code":"import _slicedToArray from\"/Users/noamlubofsky/Flatiron/Code/phase5/final-project/unicart/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import styled from\"styled-components\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PaymentInfo(_ref){var user=_ref.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),payment=_useState2[0],setPayment=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),type=_useState4[0],setType=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),number=_useState8[0],setNumber=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),expiration=_useState10[0],setExpiration=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),cvv=_useState12[0],setCvv=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),edit=_useState14[0],setEdit=_useState14[1];var id=useParams().id;useEffect(function(){fetch(\"/payment_infos/\".concat(id)).then(function(res){return res.json();}).then(function(data){setPayment(data);});},[id]);var createPaymentInfo=function createPaymentInfo(type,name,number,expiration,cvv){fetch(\"/payment_infos\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({card_type:type,name_on_card:name,card_number:number,expiration:expiration,cvv:cvv,user_id:user.id})}).then(function(response){return response.json();})//   .then((info) => setInfo(info))\n//   .then(console.log(info))\n.then(editInfo);};var handleSubmit=function handleSubmit(e){e.preventDefault();createPaymentInfo(type,name,number,expiration,cvv);fetch(\"/payment_infos/\".concat(id)).then(function(res){return res.json();}).then(function(data){setPayment(data);});};var editInfo=function editInfo(){setEdit(!edit);fetch(\"/payment_infos/\".concat(id)).then(function(res){return res.json();}).then(function(data){setPayment(data);});};return/*#__PURE__*/_jsx(\"div\",{children:edit?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Payment Info:\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Card Type: \",/*#__PURE__*/_jsx(\"input\",{required:true,type:\"text\",value:type,placeholder:payment?payment.card_typepayment:null,onChange:function onChange(e){return setType(e.target.value);}}),\" \"]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Name on Card: \",/*#__PURE__*/_jsx(\"input\",{required:true,type:\"text\",value:name,placeholder:payment?payment.name_on_card:null,onChange:function onChange(e){return setName(e.target.value);}}),\" \"]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Card Number: \",/*#__PURE__*/_jsx(\"input\",{required:true,type:\"text\",value:number,placeholder:payment?payment.card_number:null,onChange:function onChange(e){return setNumber(e.target.value);}}),\" \"]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Expiration: \",/*#__PURE__*/_jsx(\"input\",{required:true,type:\"text\",value:expiration,placeholder:payment?payment.expiration:null,onChange:function onChange(e){return setExpiration(e.target.value);}}),\" \"]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"CVV: \",/*#__PURE__*/_jsx(\"input\",{required:true,type:\"text\",value:cvv,placeholder:payment?payment.cvv:null,onChange:function onChange(e){return setCvv(e.target.value);}}),\" \"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save Info\"}),/*#__PURE__*/_jsx(\"button\",{onClick:editInfo,children:\"Cancel Editing\"})]})]}),/*#__PURE__*/_jsx(\"br\",{})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Payment Info:\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Card Type: \",payment?payment.card_type:null,\" \"]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Name on Card: \",payment?payment.name_on_card:null,\" \"]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Card Number: \",payment?payment.card_number:null,\" \"]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Expiration: \",payment?payment.expiration:null,\" \"]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"CVV: \",payment?payment.cvv:null,\" \"]}),/*#__PURE__*/_jsx(\"button\",{onClick:editInfo,children:\"Change Default Payment\"}),/*#__PURE__*/_jsx(\"br\",{})]})});}export default PaymentInfo;","map":{"version":3,"sources":["/Users/noamlubofsky/Flatiron/Code/phase5/final-project/unicart/client/src/components/PaymentInfo.js"],"names":["React","useEffect","useState","useParams","styled","PaymentInfo","user","payment","setPayment","type","setType","name","setName","number","setNumber","expiration","setExpiration","cvv","setCvv","edit","setEdit","id","fetch","then","res","json","data","createPaymentInfo","method","headers","body","JSON","stringify","card_type","name_on_card","card_number","user_id","response","editInfo","handleSubmit","e","preventDefault","card_typepayment","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport styled from \"styled-components\";\n\nfunction PaymentInfo({user}) {\n    const [payment, setPayment] = useState([])\n    const [type, setType] = useState(null)\n    const [name, setName] = useState(null)\n    const [number, setNumber] = useState(null)\n    const [expiration, setExpiration] = useState(null)\n    const [cvv, setCvv] = useState(null)\n    const [edit, setEdit] = useState(false)\n    const id = useParams().id;\n\n    useEffect(() => {\n        fetch(`/payment_infos/${id}`)\n          .then((res) => res.json())\n          .then((data) => {\n            setPayment(data);\n          });\n      }, [id]);\n\n    const createPaymentInfo = (type, name, number, expiration, cvv) => {\n        fetch(\"/payment_infos\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            card_type: type,\n            name_on_card: name,\n            card_number: number,\n            expiration: expiration,\n            cvv: cvv,\n            user_id: user.id,\n          }),\n        })\n          .then((response) => response.json())\n        //   .then((info) => setInfo(info))\n        //   .then(console.log(info))\n        .then(editInfo)\n      };\n    \n      const handleSubmit = (e) => {\n        e.preventDefault();\n        createPaymentInfo(type, name, number, expiration, cvv);\n        fetch(`/payment_infos/${id}`)\n        .then((res) => res.json())\n        .then((data) => {\n          setPayment(data);\n        });\n      };\n\n      const editInfo = () => {\n          setEdit(!edit)\n             fetch(`/payment_infos/${id}`)\n        .then((res) => res.json())\n        .then((data) => {\n          setPayment(data);\n        });\n      }\n    return(\n        <div>\n            {edit ?\n        <div>\n    <h1>Payment Info:</h1>\n    <form onSubmit={handleSubmit}>\n    <h2>Card Type: <input required type=\"text\" value={type} placeholder={payment ? payment.card_typepayment : null} onChange={(e) => setType(e.target.value)}></input> </h2>\n    <h2>Name on Card: <input required type=\"text\" value={name} placeholder={payment ? payment.name_on_card : null} onChange={(e) => setName(e.target.value)}></input> </h2>\n    <h2>Card Number: <input required type=\"text\" value={number} placeholder={payment ? payment.card_number : null} onChange={(e) => setNumber(e.target.value)}></input> </h2>\n    <h2>Expiration: <input required type=\"text\" value={expiration} placeholder={payment ? payment.expiration : null} onChange={(e) => setExpiration(e.target.value)}></input> </h2>\n    <h2>CVV: <input required type=\"text\" value={cvv} placeholder={payment ? payment.cvv : null} onChange={(e) => setCvv(e.target.value)}></input> </h2>\n    <span> \n    <button type=\"submit\">Save Info</button>\n    <button onClick={editInfo}>Cancel Editing</button>\n    </span>\n    </form>\n    <br></br>\n    </div>\n        : \n        <div>\n        <h1>Payment Info:</h1>\n        <h2>Card Type: {payment ? payment.card_type : null} </h2>\n        <h2>Name on Card: {payment ? payment.name_on_card : null} </h2>\n        <h2>Card Number: {payment ? payment.card_number : null} </h2>\n        <h2>Expiration: {payment ? payment.expiration : null} </h2>\n        <h2>CVV: {payment ? payment.cvv : null} </h2>\n        <button onClick={editInfo}>Change Default Payment</button>\n        <br></br>\n        </div> \n        }\n    </div>\n    )\n}\n\nexport default PaymentInfo;"]},"metadata":{},"sourceType":"module"}