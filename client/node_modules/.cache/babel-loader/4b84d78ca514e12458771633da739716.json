{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/noamlubofsky/Flatiron/Code/phase5/final-project/unicart/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _slicedToArray from\"/Users/noamlubofsky/Flatiron/Code/phase5/final-project/unicart/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import React,{useState}from\"react\";import styled from\"styled-components\";import{useHistory}from\"react-router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginForm(_ref){var onLogin=_ref.onLogin;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),errors=_useState6[0],setErrors=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setIsLoading=_useState8[1];var history=useHistory();function handleSubmit(e){e.preventDefault();setIsLoading(true);fetch(\"/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username:username,password:password})}).then(function(r){setIsLoading(false);if(r.ok){r.json().then(function(user){return onLogin(user);});// history.push(\"/products\")  \n}else{r.json().then(function(err){return setErrors(err.errors);});}});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(FormField,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"username\",children:\"Username:\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",id:\"username\",autoComplete:\"off\",value:username,onChange:function onChange(e){return setUsername(e.target.value);}})]}),/*#__PURE__*/_jsxs(FormField,{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(Input,{type:\"password\",id:\"password\",autoComplete:\"current-password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(FormField,{children:/*#__PURE__*/_jsx(Button,{type:\"submit\",children:isLoading?\"Loading...\":\"Login\"})}),/*#__PURE__*/_jsx(FormField,{children:errors.map(function(err){return/*#__PURE__*/_jsx(Error,{children:err},err);})})]})});}var FormField=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  &:not(:last-child) {\\n    margin-bottom: 12px;\\n  }\\n\"])));var Error=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  color: red;\\n  font-size: 30px;\\n\"])));var Label=styled.label(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  color: #363636;\\n  display: block;\\n  font-size: 1rem;\\n  font-weight: 700;\\n  margin-bottom: 8px;\\n\"])));var Input=styled.input(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  border: 1px solid transparent;\\n  border-color: #dbdbdb;\\n  -webkit-appearance: none;\\n  max-width: 100%;\\n  width: 100%;\\n  font-size: 1rem;\\n  line-height: 1.5;\\n  padding: 4px;\\n\"])));var Button=styled.button(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  cursor: pointer;\\n  font-size: 1.3rem;\\n  border: 1px solid transparent;\\n  padding: 8px 16px;\\n  text-decoration: none;\\n  width: 100%;\\n  background-color: #2E6268;\\n  display: flex;\\n  justify-content: center;\\n  align-self: center;\\n  a {\\n    color: inherit;\\n    text-decoration: none;\\n  }\\n\"])));export default LoginForm;","map":{"version":3,"sources":["/Users/noamlubofsky/Flatiron/Code/phase5/final-project/unicart/client/src/components/LoginForm.js"],"names":["React","useState","styled","useHistory","LoginForm","onLogin","username","setUsername","password","setPassword","errors","setErrors","isLoading","setIsLoading","history","handleSubmit","e","preventDefault","fetch","method","headers","body","JSON","stringify","then","r","ok","json","user","err","target","value","map","FormField","div","Error","Label","label","Input","input","Button","button"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport {useHistory} from \"react-router\";\n\nfunction LoginForm({ onLogin }) {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errors, setErrors] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  let history = useHistory();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    setIsLoading(true);\n    fetch(\"/login\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ username, password }),\n    }).then((r) => {\n      setIsLoading(false);\n      if (r.ok) {\n        r.json().then((user) => onLogin(user));\n        // history.push(\"/products\")  \n      } else {\n        r.json().then((err) => setErrors(err.errors));\n      }\n    });\n  }\n\n  return (\n    <div>\n      <form onSubmit={handleSubmit}>\n        <FormField>\n          <Label htmlFor=\"username\">Username:</Label>\n            <Input\n              type=\"text\"\n              id=\"username\"\n              autoComplete=\"off\"\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n            />\n        </FormField>\n        <FormField>\n          <Label htmlFor=\"password\">Password:</Label>\n            <Input\n              type=\"password\"\n              id=\"password\"\n              autoComplete=\"current-password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n        </FormField>\n        <FormField>\n          <Button type=\"submit\">{isLoading ? \"Loading...\" : \"Login\"}</Button>\n        </FormField>\n      <FormField>\n        {errors.map((err) => (\n          <Error key={err}>{err}</Error>\n        ))}\n      </FormField>\n    </form>\n    </div>\n  );\n}\n\n\nconst FormField = styled.div`\n  &:not(:last-child) {\n    margin-bottom: 12px;\n  }\n`;\n\nconst Error = styled.div`\n  color: red;\n  font-size: 30px;\n`;\n\nconst Label = styled.label`\n  color: #363636;\n  display: block;\n  font-size: 1rem;\n  font-weight: 700;\n  margin-bottom: 8px;\n`;\nconst Input = styled.input`\n  border: 1px solid transparent;\n  border-color: #dbdbdb;\n  -webkit-appearance: none;\n  max-width: 100%;\n  width: 100%;\n  font-size: 1rem;\n  line-height: 1.5;\n  padding: 4px;\n`;\nconst Button = styled.button`\n  cursor: pointer;\n  font-size: 1.3rem;\n  border: 1px solid transparent;\n  padding: 8px 16px;\n  text-decoration: none;\n  width: 100%;\n  background-color: #2E6268;\n  display: flex;\n  justify-content: center;\n  align-self: center;\n  a {\n    color: inherit;\n    text-decoration: none;\n  }\n`;\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}